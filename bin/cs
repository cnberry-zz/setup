#!/bin/bash

# Require $SRC to be set for location of cscope.out
if [ -z ${SRC+x} ]; then
	echo "ERROR: $SRC is not set"
	exit
else
	echo "SRC is set to '$SRC'"
fi

cd /

# For directoreis to be excluded, add -o -name <dir> inbetween first (). 
# For file extension to be included, add -o -name "*.<ext>" inbetween second ()
echo "Creating $SRC/cscope.files"
find $SRC \( -name gen_lattice -o -name thridpary \) -prune -o \( -name "*.c" -o -name "*.h" -o -name "*.cpp" -o -name "*.cc" -o -name "*.hh" -o -name "*.v" -o -name "*.sv" \)  -print> $SRC/cscope.files
cd $SRC
echo "Running cscope now..."
cscope -b
export CSCOPE_DB=$SRC/cscope.out

#run ctags as well
#echo "Running ctags now..."
#/usr/bin/ctags -R --exclude=gen_lattice --exclude=thirdparty
